<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>
  <div id="app">
  <div class="container">
    <h1 class="text-center">練習</h1>
    <p>你按了{{totalLike}}個讚</p>
    <div class="row">
      <card v-for="card in cards" :img="card.img" :text="card.text" :like.sync="card.like"></card>
    </div>
  </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <script type="text/x-template" id="card">
      <div class="col-4 p-2">
    <div class="card">
      <img class="card-img-top" :src="img" >
      <div class="card-body">
      <p class="card-text">{{ text }}</p>
    </div>
      <div class="card-footer">
      <input class="btn btn-primary" type="button" :value="syncLike ? '收回讚' : '讚' " @click="syncLike = !synclike">
  </div>
    </div>
    </div>
  </script>
  <script>
    Vue.component('card',{
      template:'#card',
      props: {
        img:{
          type:String,
          default:''
        },
        text:{
          type:String,
          default:''
        },
        like: {
          type:Boolean,
          default:false
        }
      },
      computed: {
        syncLike: {
          get () {
            return this.like
          },
          set (value) {
            this.$emit('update:like',value)
          }
        }
      }
    })

    new Vue({
      el:'#app',
      data () {
        return {
          cards:[
            {img:'https://picsum.photos/600/400/?random=1',text:'aaaaa',like:false},
            {img:'https://picsum.photos/500/300/?random=2',text:'bbbbbb',like:false},
            {img:'https://picsum.photos/500/300/?random=3',text:'aaaaa',like:false},
            {img:'https://picsum.photos/500/300/?random=4',text:'bbbbbb',like:false},
            {img:'https://picsum.photos/500/300/?random=5',text:'aaaaa',like:false}
          ]
        }
      },
      computed: {
        totalLike (){
          return this.cards.filter(card => {
            return card.like
          }).length
        }
      }
    })
  </script>
</body>
</html>